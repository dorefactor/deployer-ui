<div [formGroup]="form">
  <table class="table table-striped table-bordered">
    <thead>
      <tr>
        <th>{{ title }}
          <a (click)="onClose()" class="text-info">
            <i [ngClass]="isEdit ? 'fa fa-times-circle' : 'fa fa-pencil'"></i>
          </a>
        </th>
      </tr>
    </thead>

    <tbody *ngIf="!isEdit">
      <tr *ngFor="let keyValuePair of keyValuePairs; let i = index">
        <td *ngIf="keyValuePair?.key">
          <i (click)="onDelete(i)" class="fa fa-times-circle"></i>
          {{keyValuePair.key}}
        </td>
      </tr>
    </tbody>

    <tbody *ngIf="isEdit">
      <tr formArrayName="keyValuePairs"
        *ngFor="let keyValuePair of form.get('keyValuePairs')?.controls; let i = index;">
        <td>
          <div [formGroupName]="i" class="input-group">
            <div class="input-group-prepend">
              <div (click)="onDelete(i)" class="input-group-text">
                <i class="fa fa-times-circle"></i>
              </div>
            </div>
            <div class="row">
              <div class="col">
                <mat-form-field>
                  <input matInput placeholder="Variable Name" formControlName="key">
                </mat-form-field>
              </div>
              <div class="col">
                <mat-form-field>
                  <input matInput placeholder="Variable Value" formControlName="value">
                </mat-form-field>
              </div>
            </div>
          </div>
        </td>
      </tr>
      <tr>
        <td class="actions">
          <!-- <button class="btn btn-secondary btn-lg1" type="button"
        (click)="addFieldValue()" style="margin-right:10px">Add More Item</button> -->
          <!-- <button (click)="onEditCloseItems()" class="btn btn-primary btn-lg1" type="button">Save Items</button> -->
          <mat-icon (click)="onAddItem()" class="fa fa-plus-circle actions__action-add"></mat-icon>
          <mat-icon (click)="onClose()" class="fa fa-check-circle actions__action-save"></mat-icon>
        </td>
      </tr>
    </tbody>
  </table>
</div>