<div class="card" [formGroup]="hostsSetupForm">
  <div (click)="onCloseTag()" class="card-header bg-info text-white icon__cursor-pointer">
    <span class="title">Tags</span>
    <fa-icon [icon]="isEditTags ? ['fa', 'times-circle'] : ['fa', 'pencil-alt']"></fa-icon>
  </div>
  <!-- Tags Summary -->
  <table class="table table-striped table-bordered tags__summary">
    <tbody *ngIf="!isEditTags">
      <tr *ngFor="let tag of tagsSetup; let i = index;">
        <td>
          <div>
            <div (click)="onDeleteTagItem(i)" class="input-group-text icon__cursor-pointer icon__close">
              <i class="fa fa-times-circle"></i>
            </div>
            <div>
              <span>{{ tag.name }}</span>
            </div>
          </div>
        </td>
      </tr>
    </tbody>
  </table>
  <!-- End Tags Summary -->
  <!-- Tags Edition -->
  <div *ngIf="isEditTags" class="card-body">
    <div formArrayName="tags">
      <div *ngFor="let tag of hostsSetupForm['controls'].tags['controls']; let tagIndex = index;">
        <div [formGroupName]="tagIndex">
          <div class="row">
            <div class="col">
              <div (click)="onDeleteTagItem(tagIndex)" class="icon">
                <mat-icon class="fa fa-times-circle"></mat-icon>
              </div>
              <div>
                <mat-form-field>
                  <input matInput placeholder="Tag" formControlName="name">
                </mat-form-field>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col">
              <!-- Hosts Start -->
              <table class="table table-striped table-bordered">
                <thead>
                  <tr>
                    <th>
                      <div class="hosts-title__container">
                        <div class="hosts-title__message">
                          <span>Hosts</span>
                        </div>
                        <div (click)="onCloseHost()" class="hosts-title__icon icon__cursor-pointer">
                          <fa-icon [icon]="isEditHosts ? ['fa', 'times-circle'] : ['fa', 'pencil-alt']"></fa-icon>
                        </div>
                      </div>
                    </th>
                  </tr>
                </thead>
                <!-- Hosts Summary -->
                <tbody *ngIf="!isEditHosts && tagsSetup.length > 0">
                  <tr *ngFor="let host of tagsSetup[tagIndex].hosts; let i = index;">
                    <td>
                      <div>
                        <div (click)="onDeleteHostItem(i)" class="input-group-text icon__cursor-pointer icon__close">
                          <i class="fa fa-times-circle"></i>
                        </div>
                        <div>
                          <span>{{ host.ip }}</span>
                        </div>
                      </div>
                    </td>
                  </tr>
                </tbody>
                <!-- End Hosts Summary -->
                <!-- Hosts Edition -->
                <tbody *ngIf="isEditHosts">
                  <tr formArrayName="hosts" *ngFor="let host of tag['controls'].hosts['controls']; let hostIndex=index">
                    <td>
                      <div [formGroupName]="hostIndex" class="input-group">
                        <div class="input-group-prepend">
                          <div (click)="onDeleteHostItem(hostIndex)" class="input-group-text icon__cursor-pointer">
                            <i class="fa fa-times-circle"></i>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col">
                            <mat-form-field>
                              <input matInput placeholder="IP Address" formControlName="ip">
                            </mat-form-field>
                          </div>
                          <div class="col">
                            <mat-form-field>
                              <input matInput placeholder="Username" formControlName="username">
                            </mat-form-field>
                          </div>
                          <div class="col">
                            <mat-form-field>
                              <div class="password">
                                <div class="password__input-text">
                                  <input matInput placeholder="Password" formControlName="password"
                                    [type]="hide ? 'password' : 'text'">
                                </div>
                                <div (click)="hide = !hide" class="password__icon">
                                  <mat-icon matSuffix [ngClass]="hide ? 'fa fa-eye-slash' : 'fa fa-eye'"
                                    class="icon__cursor-pointer">
                                  </mat-icon>
                                </div>
                              </div>
                            </mat-form-field>
                          </div>
                        </div>
                      </div>
                    </td>
                  </tr>
                  <tr>
                    <td class="actions">
                      <div>
                        <div class="button__hosts--add">
                          <button mat-mini-fab color="primary" (click)="onAddHostItem(tagIndex)" type="button">
                            <mat-icon class="fa fa-laptop-medical"></mat-icon>
                          </button>
                        </div>
                        <div class="button--check">
                          <button mat-mini-fab [color]="'success'" (click)="onCloseHost()" type="button">
                            <mat-icon class="fa fa-check"></mat-icon>
                          </button>
                        </div>
                      </div>
                    </td>
                  </tr>
                </tbody>
                <!-- End Hosts Edition -->
              </table>
              <!-- Hosts End -->
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- End Tags Edition -->
  <div *ngIf="isEditTags" class="card-footer text-muted">
    <div>
      <div class="button--add">
        <button mat-mini-fab color="accent" (click)="onAddTagItem()" type="button">
          <mat-icon class="fa fa-plus-circle"></mat-icon>
        </button>
      </div>
      <div class="button--check">
        <button mat-mini-fab [color]="'success'" (click)="onCloseTag()" type="button">
          <mat-icon class="fa fa-check"></mat-icon>
        </button>
      </div>
    </div>
  </div>
</div>